const fs = require('fs');
const path = require('path');

console.log('ğŸ“Š ìˆ˜ë™ ê¸°ë³¸/íŠ¹ì„± ë¶„ë¥˜ ì ìš© ì‹œì‘...');

// ê¸°ì¡´ ë°ì´í„°ë² ì´ìŠ¤ ë¡œë“œ
const dbPath = path.join(__dirname, 'tww-s3-final-ultimate-database.json');
const database = JSON.parse(fs.readFileSync(dbPath, 'utf8'));

// TWW ì‹œì¦Œ 3 ì •í™•í•œ ê¸°ë³¸ ìŠ¤í‚¬ ë§¤í•‘ (í™•ì‹¤íˆ ê¸°ë³¸ì¸ ìŠ¤í‚¬ë“¤)
const baselineSkills = {
  'WARRIOR': [
    '100', // ëŒì§„
    '355', // ë„ë°œ
    '6673', // ì „íˆ¬ì˜ ì™¸ì¹¨
    '18499', // ê´‘ì „ì‚¬ì˜ ê²©ë…¸
    '23920', // ì£¼ë¬¸ ë°˜ì‚¬
    '1160', // ì‚¬ê¸°ì˜ ì™¸ì¹¨
    '6544', // ì˜ì›…ì˜ ë„ì•½
    '5246', // ìœ„í˜‘ì˜ ì™¸ì¹¨
    '2565', // ë°©íŒ¨ ë§‰ê¸°
    '1715', // ë¬´ë ¥í™”
    '6572', // ë³µìˆ˜
    '1464', // ë¶„ì‡„
    '23922', // ë°©íŒ¨ ì¹˜ê¸°
    '163201', // ì²˜í˜•
    '1680', // ì†Œìš©ëŒì´
    '845', // íšŒì „ë² ê¸°
  ],
  'PALADIN': [
    '853', // ì‹¬íŒì˜ ë§ì¹˜
    '62124', // ì‹ ì˜ ê¶ŒëŠ¥
    '633', // ì‹ ì˜ ì¶•ë³µ
    '642', // ì²œìƒì˜ ë³´í˜¸ë§‰
    '1044', // ììœ ì˜ ì¶•ë³µ
    '1022', // ë³´í˜¸ì˜ ì¶•ë³µ
    '6940', // í¬ìƒì˜ ì¶•ë³µ
    '31884', // ì‘ì§•ì˜ ê²©ë…¸
    '184662', // ì‘ì§•ì˜ ë°©íŒ¨
    '85673', // ì˜ê´‘ì˜ ì„œì•½
    '20473', // ì‹ ì„± ì¶©ê²©
    '35395', // ì„±ì „ì‚¬ì˜ ì¼ê²©
    '53600', // ì •ì˜ì˜ ë°©íŒ¨
    '26573', // í—Œì‹ 
    '275779', // ì‹¬íŒ
  ],
  'HUNTER': [
    '1543', // ì„¬ê´‘íƒ„
    '19801', // í‰ì • ì‚¬ê²©
    '147362', // ì—­ìŠµ
    '186265', // ê±°ë¶ì˜ ìƒ
    '109304', // í™œì„±í™”
    '195645', // ë‚ ê°œ ì ˆë‹¨
    '1513', // ì•¼ìˆ˜ ìœ„í˜‘
    '5116', // ë‡Œì§„íƒ• ì‚¬ê²©
    '2643', // ë…ì‚¬ ì˜ê¸°
    '187650', // ë¹™ê²°ì˜ ë«
    '185358', // ë¹„ì „ ì‚¬ê²©
    '186257', // ì¹˜íƒ€ì˜ ìƒ
    '186289', // ë…ìˆ˜ë¦¬ì˜ ìƒ
    '883', // ì•¼ìˆ˜ ë¶€ë¥´ê¸°
    '982', // ë˜ì‚´ë¦¬ê¸°
  ],
  'ROGUE': [
    '1784', // ì€ì‹ 
    '1766', // ë°œì°¨ê¸°
    '2094', // ì‹¤ëª…
    '1856', // ì†Œë©¸
    '5277', // íšŒí”¼
    '31224', // ê·¸ë¦¼ì ë§í† 
    '114018', // ì€ì‹ ì²˜
    '1725', // í˜¼ë€
    '2823', // ë…ì¹¼
    '3408', // ìƒì²˜ ê°ì—¼ ë…
    '8679', // ë¬´ìë¹„í•œ ê³µê²©
    '1833', // ê·¸ë¦¼ì ì¹¼ì¶¤
    '2098', // ì ˆê°œ
    '1776', // ëª© ì¡°ë¥´ê¸°
    '408', // ì‹ ì¥ ì°Œë¥´ê¸°
  ],
  'PRIEST': [
    '17', // ì‹ ì˜ ê¶ŒëŠ¥: ë³´í˜¸ë§‰
    '21562', // ì‹ ì˜ ê¶ŒëŠ¥: ì¸ë‚´
    '2061', // ë¹›ì˜ ì„¬ê´‘
    '589', // ì•”í‘ì˜ ë§ˆë²•
    '8092', // ì •ì‹  í­ë°œ
    '605', // ì •ì‹  ì œì–´
    '586', // ì†Œì‹¤
    '528', // ì‚¬ì•… ë¬´íš¨í™”
    '527', // ì •í™”
    '2006', // ë¶€í™œ
    '48045', // ì •ì‹ ì˜ ë¶ˆê¸¸
    '33206', // ê³ í†µ ì–µì œ
    '47536', // í™˜í¬
    '32375', // ëŒ€ê·œëª¨ ë¬´íš¨í™”
    '139', // ì†Œìƒ
  ],
  'SHAMAN': [
    '188196', // ë²ˆê°œ í™”ì‚´
    '51505', // ìš©ì•” í­ë°œ
    '188389', // í™”ì—¼ ì¶©ê²©
    '51490', // ì²œë‘¥í­í’
    '108271', // ì˜í˜¼ ì´ë™
    '556', // ì˜í˜¼ ê·€í™˜
    '2008', // ì„ ì¡°ì˜ ì˜í˜¼
    '370', // ëŒ€ì§€ ì •ë ¹ í† í…œ
    '51485', // ì†ë°•ì˜ í† í…œ
    '192058', // ë²ˆê°œ ì¶•ì „ê¸° í† í…œ
    '8042', // ëŒ€ì§€ ì¶©ê²©
    '2484', // ëŒ€ì§€ì˜ ì†ë°• í† í…œ
    '79206', // ì˜í˜¼ë‚˜ê·¸ë„¤ì˜ ì€ì´
    '546', // ìˆ˜ì¤‘ ê±·ê¸°
    '131', // ìˆ˜ì¤‘ í˜¸í¡
  ],
  'MAGE': [
    '1449', // ë¹„ì „ í­ë°œ
    '319836', // í™”ì—¼ í­ë°œ
    '116', // ì„œë¦¬ í™”ì‚´
    '2136', // í™”ì—¼ ì‘ë ¬
    '122', // ì–¼ìŒ íšŒì˜¤ë¦¬
    '130', // ì €ì† ë‚™í•˜
    '1953', // ì ë©¸
    '475', // íˆ¬ëª…í™”
    '80353', // ì‹œê°„ ì™œê³¡
    '190336', // ë¹„ì „ ì§€ëŠ¥
    '759', // ë¹„ì „ ì²©ë³´
    '1459', // ë§ˆë²•ì‚¬ ì§€ëŠ¥
    '66', // íˆ¬ëª…í™”
    '118', // ë³€ì´
    '30451', // ë¹„ì „ íƒ„ë§‰
  ],
  'WARLOCK': [
    '172', // ë¶€íŒ¨
    '980', // ê³ í†µ
    '702', // ì–´ë‘ ì˜ ì €ì£¼
    '1454', // ìƒëª…ë ¥ ì§‘ì¤‘
    '5782', // ê³µí¬
    '710', // ì¶”ë°©
    '20707', // ì˜í˜¼ì„
    '698', // ì˜ì‹: ì†Œí™˜
    '697', // ì˜ì‹: ì†Œí™˜ì§„
    '48018', // ì•…ë§ˆì˜ ë§ˆë²•ì§„
    '29893', // ì˜í˜¼ì„ ìƒì„±
    '111771', // ì•…ë§ˆì˜ ê´€ë¬¸
    '5697', // ë¶€ì •í•œ ì˜ì§€
    '126', // ì˜¬ê°€ë¯¸ì˜ ì €ì£¼
    '104773', // ë¶ˆêµ´ì˜ ê²°ì˜
  ],
  'MONK': [
    '100780', // í•´ì˜¤ë¦„ì°¨ê¸°
    '100784', // í‘ìš° ì°¨ê¸°
    '101546', // íšŒì „ í•™ë‹¤ë¦¬ì°¨ê¸°
    '109132', // êµ¬ë¥´ê¸°
    '115178', // ì¬í™œ
    '115203', // ê°•í™” ì£¼
    '115546', // ì†Œí˜¹ì˜ ì•ˆê°œ
    '116670', // í‰ì˜¨
    '116705', // ì†ë‚  ì°Œë¥´ê¸°
    '119381', // íŒ½ì´ì°¨ê¸°
    '117952', // ëŒ€ì§€ì˜ ê· ì—´
    '115450', // í•´ë…
    '218164', // í•´ë…
    '115078', // ë§ˆë¹„
    '115098', // ê¸°ì˜ íŒŒë™
  ],
  'DRUID': [
    '5487', // ê³° ë³€ì‹ 
    '768', // í‘œë²” ë³€ì‹ 
    '783', // ì—¬í–‰ ë³€ì‹ 
    '22812', // ë‚˜ë¬´ê»ì§ˆ
    '5211', // ê±°ì„¼ ê°•íƒ€
    '99', // ë°©í–¥ ê°ê° ìƒì‹¤ì˜ í¬íš¨
    '1126', // ì•¼ìƒì˜ ì§•í‘œ
    '20484', // í™˜ìƒ
    '29166', // ì •ì‹  ìê·¹
    '2908', // ë‹¬ë¹›ì„¬ê´‘
    '8936', // ì¬ìƒ
    '774', // íšŒë³µ
    '2637', // ë™ë©´
    '2782', // ìˆ˜í’€ ì œê±°
    '1850', // ì§ˆì£¼
  ],
  'DEMONHUNTER': [
    '162794', // í˜¼ëˆì˜ ì¼ê²©
    '162243', // ì•…ë§ˆì˜ ì´ë¹¨
    '198013', // ëˆˆë¹”
    '195072', // ì§€ì˜¥ ëŒì§„
    '185245', // ê³ ë¬¸
    '188501', // ì•…ë ¹ ì‹œì•¼
    '196718', // ì–´ë‘ ì˜ ê¶ŒëŠ¥
    '198589', // íë¦¿í•´ì§€ê¸°
    '183752', // ë¶„ì—´
    '185123', // íˆ¬ì²™ ê¸€ë ˆì´ë¸Œ
    '204021', // í™”ì—¼ ì¸ì¥
    '204596', // ì¸ì¥ì˜ ìˆ™ë ¨
    '207682', // ì¹¨ë¬µ ì¸ì¥
    '202137', // ì¹¨ë¬µì˜ ì¸ì¥
    '202138', // ì‚¬ìŠ¬ì˜ ì¸ì¥
  ],
  'DEATHKNIGHT': [
    '49998', // ì£½ìŒì˜ ì¼ê²©
    '195182', // ë£¬ ë¬´ê¸° ì¼ê²©
    '47528', // ì •ì‹  ì–¼ë¦¬ê¸°
    '43265', // ì£½ìŒê³¼ ë¶€íŒ¨
    '48707', // ëŒ€ë§ˆë²• ë³´í˜¸ë§‰
    '48792', // ì–¼ìŒê°™ì€ ì¸ë‚´ë ¥
    '49576', // ì£½ìŒì˜ ì†ì•„ê·€
    '56222', // ì–´ë‘ ì˜ ëª…ë ¹
    '61999', // ì•„êµ° ë˜ì‚´ë¦¬ê¸°
    '3714', // ì£½ìŒì˜ ê¸¸
    '45524', // ì‚¬ìŠ¬ ì–¼ë¦¬ê¸°
    '47541', // ì£½ìŒì˜ ê³ ë¦¬
    '49206', // ëŒí’
    '49020', // í¡í˜ˆ
    '49143', // ì˜í˜¼ ë¶ˆíƒœìš°ê¸°
  ],
  'EVOKER': [
    '361469', // ì‚´ì•„ìˆëŠ” ë¶ˆê½ƒ
    '357208', // ë¶ˆì˜ ìˆ¨ê²°
    '362969', // í‘¸ë¥¸ ìš©ì˜ í˜
    '351338', // ì–µì œ
    '358267', // í˜¸ë²„
    '357210', // ê¹Šì€ ìˆ¨ê²°
    '360806', // ì ìëŠ” ìˆ¨ê²°
    '363916', // í‘ìš”ì„ ë¹„ëŠ˜
    '365585', // ë‚ ê°œì˜ ì™„ì¶©
    '361227', // ê·€í™˜
    '358385', // ëŒ€ì§€ ì‡„ë„
    '374251', // ì†Œì‘
    '370665', // êµ¬ì¡°
    '361021', // ì‹œê°„ ê°ì˜¥
    '360995', // ì§„í™ë¹› ëŒ€ì§€
  ]
};

// TWW ì‹œì¦Œ 3 ëŒ€í‘œ íŠ¹ì„± ìŠ¤í‚¬ (íŠ¹ì„± íŠ¸ë¦¬ì— í™•ì‹¤íˆ ìˆëŠ” ê²ƒë“¤)
const talentSkills = {
  'WARRIOR': [
    '167105', // ê±°ì¸ì˜ ê°•íƒ€
    '262161', // ì „ìŸì¸ë„ì
    '152277', // ë¶„ì‡„
    '227847', // ì¹¼ë‚ í­í’
    '46968', // ì¶©ê²©íŒŒ
    '107574', // íˆ¬ì‹ 
    '260708', // íœ©ì“¸ê¸° ì¼ê²©
    '262150', // í•™ì‚´
    '383762', // í­ë°œì˜ ê²©ë…¸
    '392778', // ê´‘í­í•œ í¬íš¨
    '383873', // í˜¼ë€
    '384100', // ê´‘ì „ì‚¬ì˜ ë¬´ëª¨í•¨
    '280735', // ì²˜í˜•
    '85288', // ê´‘í­í•œ ëŒì§„
  ],
  'PALADIN': [
    '31850', // í—Œì‹ ì ì¸ ìˆ˜í˜¸ì
    '86659', // ê³ ëŒ€ ì™•ì˜ ìˆ˜í˜¸ì
    '231895', // ì„±ì „ì‚¬
    '215652', // ì •ì˜ì˜ ë°©íŒ¨
    '343527', // ì²˜í˜• ì„ ê³ 
    '255937', // ì‹­ìêµ°ì˜ ì„ ê³ 
    '343721', // ìµœí›„ì˜ ì‹¬íŒ
    '384027', // ì€ì´ì˜ ì¬
    '403876', // ë¹›ì˜ ì¸ë„
    '427441', // ì‹ ì„±í•œ ë³‘ê¸°
    '385414', // ë¹›ì˜ ì •ì 
    '387174', // ì˜ê´‘ìŠ¤ëŸ¬ìš´ ìˆœê°„
    '216331', // ì‘ì§•ì˜ ì„±ì „ì‚¬
    '337247', // ìµœí›„ì˜ ë³µìˆ˜
  ],
  'HUNTER': [
    '257044', // ê¸‰ì† ì‚¬ê²©
    '193530', // ì•¼ìƒì˜ ìƒ
    '260402', // ì´ì¤‘ ì‚¬ê²©
    '257620', // ë‹¤ì¤‘ ì‚¬ê²©
    '259387', // ëª½êµ¬ìŠ¤ ë¬¼ê¸°
    '266779', // ì¡°ì • ì‚¬ê²©
    '194407', // ì°½ íˆ¬ì²™
    '236776', // ìƒëª…ë ¥ í­ë°œ
    '390163', // ì•½ì  ê³µê²©
    '459922', // ì•¼ìˆ˜ì˜ ê²©ë…¸
    '378747', // ì†Œìš©ëŒì´ ì‚¬ê²©
    '389880', // í”¼ì˜ ì•”ì‚´ì
    '385638', // ë§ˆë¬´ë¦¬ ì‚¬ê²©
    '407401', // ì••ë„ì ì¸ ê³µê²©
  ],
  'ROGUE': [
    '196819', // ì ˆê°œ
    '185311', // ì§„í™ìƒ‰ í­í’ìš°
    '121471', // ê·¸ë¦¼ì ì¹¼ë‚ 
    '385616', // ë©”ì•„ë¦¬ì¹˜ëŠ” íŒŒë©¸
    '360194', // ë§í†  ì•”ì‚´
    '381623', // ì¸ë‚´ì˜ ì¦‰ë°œíƒ„
    '382245', // ëƒ‰í˜ˆ
    '384631', // ë¼ˆì£¼ì‚¬ìœ„
    '385408', // í˜ˆí­í’
    '426591', // ì ì¬ëœ ë…
    '381623', // ì¸ë‚´ì˜ ì¦‰ë°œíƒ„
    '381802', // ì¹˜ëª…ì ì¸ ìŒëª¨
    '385949', // ì•…ë…í•œ ì¼ê²©
    '319032', // ì£½ìŒì˜ ê·¸ë¦¼ì
  ],
  'PRIEST': [
    '204197', // ìˆ™ì²­
    '64843', // ì²œìƒì˜ ì°¬ê°€
    '64901', // í¬ë§ì˜ ìƒì§•
    '109964', // ì˜í˜¼ì˜ ë³´í˜¸ë§‰
    '246287', // ë³µìŒ
    '214621', // ì‹ ì„±í™”
    '373481', // ì‹ ì˜ ê¶ŒëŠ¥: ìƒëª…
    '391677', // ì‹ ì„±í•œ ê³„ì‹œ
    '421453', // ê¶ê·¹ì˜ êµ¬ì›
    '391154', // ê³µí—ˆì˜ ê²©ë¥˜
    '228260', // ê³µí—ˆ ë¶„ì¶œ
    '205385', // ì•”í‘ ì¶©ê²©
    '263165', // ê³µí—ˆì˜ ê²©ë¥˜
    '391109', // ì–´ë‘ ì˜ ìŠ¹ì²œ
  ],
  'SHAMAN': [
    '191634', // í­í’ìˆ˜í˜¸ì
    '192249', // í­í’ì˜ ì •ë ¹
    '192222', // ì•¡ì²´ ë§ˆê·¸ë§ˆ í† í…œ
    '157153', // í­í’ì •ë ¹ í­ë°œ
    '333974', // ì—°ì‡„ ìˆ˜í™•
    '320125', // ë°˜í–¥ ì¶©ê²©
    '375982', // ì›ì‹œ íŒŒë„
    '114050', // ìŠ¹ì²œ
    '188443', // ì—°ì‡„ ë²ˆê°œ
    '384352', // íŒŒë©¸ì˜ í˜
    '378081', // ìì—°ì˜ ìˆ˜í˜¸ì
    '382042', // íƒœí’
    '454391', // í­í’ì¸ë„ìì˜ í˜
    '454009', // ê¹¨ì–´ë‚œ ì¡°ìƒ
  ],
  'MAGE': [
    '365350', // ë¹„ì „ ì‡„ë„
    '376103', // ì°¬ë€í•œ ë¶ˆê½ƒ
    '153561', // ìœ ì„±
    '153595', // í˜œì„± í­í’
    '157980', // ì´ˆì‹ ì„±
    '205025', // ë§ˆë ¥ì˜ ë£¬
    '389713', // ë³€ìœ„ì˜ ë§ˆë²•ì§„
    '382440', // ì´ë™ì˜ ë§ˆë²•ì§„
    '449700', // ê³µëª…í•˜ëŠ” êµ¬ì²´
    '190356', // ëˆˆë³´ë¼
    '84714', // ì–¼ì–´ë¶™ì€ êµ¬ìŠ¬
    '257537', // ìª¼ê°œì§€ëŠ” ì–¼ìŒ
    '270232', // ì•„ì´ìŠ¤í¬ê·¸
    '378433', // ëƒ‰ê¸° ëŒí’
  ],
  'WARLOCK': [
    '264119', // ëì—†ëŠ” ê³ í†µ
    '454734', // ì˜í˜¼ í¬ì‹ì
    '386951', // ì•…ë…í•œ ì¡´ì¬
    '267211', // ì´ì¤‘ì„±
    '264057', // ì˜í˜¼ ë„ê´€
    '442726', // ê³ í†µë°›ëŠ” ì˜í˜¼
    '265412', // íŒŒë©¸
    '387158', // ì‚¬ìˆ  ì§‘ì¤‘
    '353753', // ì•…ë§ˆí•™ìì˜ ë¶„ë…¸
    '387159', // í™©ì²œê¸¸ ì†Œí™˜
    '454744', // í”¼ì˜ ë§ˆë ¥ì§„
    '267170', // í™©ì²œì˜ ë¬¸
    '111898', // í•˜ëŠ˜ë¶ˆ
    '452928', // íƒ€ë½í•œ í¬íƒˆ
  ],
  'MONK': [
    '115151', // ì†Œìƒì˜ ì•ˆê°œ
    '387184', // ì„ íšŒ í•™ë‹¤ë¦¬ì°¨ê¸°ì˜ ëŒ€ê°€
    '325197', // ê¸°ì˜ íŒŒë™
    '392983', // í•´ë…ì˜ ëŒ€ê°€
    '388193', // í™©ì œì˜ íŒ½ì°½ë ¥
    '387766', // ë‚ ì•„ì˜¤ë¥´ëŠ” ë±€ ë°œì°¨ê¸°
    '115313', // ì˜¥ë£¡ì˜ ì„ìƒ
    '322118', // ê¸°ì˜ ëŒ€ê°€
    '392979', // ì „ë©¸ì˜ ì†ì•„ê·€
    '387638', // ë¬´ê¸°ì˜ ì§ˆì„œ
    '325153', // íŒŒê´´ì˜ ë¶ˆê¸¸
    '386276', // í­í¬ìˆ˜
    '322507', // ì²œìƒì˜ ì–‘ì¡°
    '387230', // ìŒë£Œ ìŸì•„ë‚´ê¸°
  ],
  'DRUID': [
    '202028', // ì”í˜¹í•œ ë² ê¸°
    '210722', // ì¿ë¹›í„¸ì˜ ê´‘ë€
    '213764', // ì†Œìš©ëŒì´
    '106785', // íœ©ì“¸ê¸°
    '400254', // ê³µí¬ ìƒì²˜
    '441585', // ë‹¬ ì¡°ê°ì
    '274837', // ê´‘í¬í•œ ì¬ìƒ
    '236748', // ì§“ì´ê¸°ê¸°
    '210705', // ì¿ë¹›í„¸
    '394048', // ë³„ë˜¥ë³„
    '102560', // í™”ì‹ : ì—˜ë£¬ì˜ ì„ íƒ
    '194223', // ì²œì‹ ì˜ ì •ë ¬
    '391888', // ì€í•˜ìˆ˜
    '450347', // ë‹¬ë¹›ì„¬ê´‘ ë¶„ë…¸
  ],
  'DEMONHUNTER': [
    '258920', // ì„ë°•í•œ ì¬ì•™
    '258860', // ì •ìˆ˜ íŒŒì—´
    '390163', // ê²©ë³€
    '452416', // ì†Œë©¸ì˜ ì‚¬ëƒ¥
    '452437', // ì „ìŸì˜ ê¸°ìˆ 
    '342817', // ê¸€ë ˆì´ë¸Œ í­í’
    '389860', // ì—°ì‡„ ì¸ì¥
    '389807', // ë‚´ë©´ì˜ ì•…ë§ˆ
    '388109', // ì—˜ë¦¬ì‹œì•ˆ ì¹™ë ¹
    '389815', // ë²„ë‹ ë¸”ëŸ¬ë“œ
    '427912', // ê°ê¸ˆ
    '452486', // ì§€ì˜¥ ì±„ì°
    '389860', // íŒŒê´´ ê´‘ì„ 
    '389697', // ì˜í˜¼ ê²©ë¥˜
  ],
  'DEATHKNIGHT': [
    '383269', // ì–´ë¹„ì…œ ë¦¼ë³´
    '376079', // ì‚¬ë ¹ìˆ ì‚¬
    '281238', // íƒ€ë½í•œ ëŒ€ì§€
    '207311', // ì˜í˜¼ ë¶„ì‡„ê¸°
    '343294', // ì˜í˜¼ ìˆ˜í™•ê¸°
    '390268', // ì–´ë‘ ì˜ ì ˆë‹¨
    '454886', // ë©”ë§ˆë¥¸ ëŒ€ì§€
    '115989', // ë¶€ì •ì˜ í¬ìš©
    '377588', // ìš´ëª…ì˜ ì‚¬ë„
    '383313', // ì–´ë¹„ì…œ ë¦¼ë³´
    '49206', // ëŒí’
    '377590', // ë™ë§¹ì˜ ì£½ìŒ
    '439843', // í™˜ì˜ì˜ ì¶”ìœ„
    '458444', // ì£½ìŒì˜ ê¸°ìˆ˜
  ],
  'EVOKER': [
    '404195', // ìƒëª…ë ¥ì˜ ë¶ˆê½ƒ
    '369553', // í‘¸ë¥¸ ìš©ì„œë¦¬
    '378441', // ì‹œê°„ ê· ì—´
    '381748', // ìš©ì‡„í¬
    '443328', // í™œê³µ
    '430539', // ì§€ì†ë˜ëŠ” í˜
    '378464', // ë‹¬ë¹›ì˜ ê°€í˜¸
    '442204', // ìƒëª…ì˜ ë¶ˆê¸¸
    '433874', // í‘¸ë¥¸ë¹› ë¬¼ê²°
    '403264', // ìš©ì˜ ë¶„ë…¸
    '403208', // ì‹œê°„ì˜ ìƒì²˜
    '406732', // ì—ë©”ë„ë“œ ìƒëª…ê½ƒ
    '441461', // ì—°ì†Œ
    '442257', // ë¶ˆê½ƒ ìˆ¨ê²°
  ]
};

// ì „ë¬¸í™”ë³„ ìŠ¤í‚¬ ë§¤í•‘
const specSkillMapping = {
  'ì „ì‚¬': {
    'ë¬´ê¸°': ['163201', '167105', '262161', '227847', '152277', '384100', '383873'],
    'ë¶„ë…¸': ['5308', '118038', '184367', '85288', '280735', '383762', '392778'],
    'ë°©ì–´': ['23922', '6572', '46968', '107574', '385952', '385394', '382939']
  },
  'ì„±ê¸°ì‚¬': {
    'ì‹ ì„±': ['19750', '183998', '53563', '183997', '114165', '216331', '385414'],
    'ë³´í˜¸': ['31935', '86659', '387174', '378974', '389539', '385283', '432459'],
    'ì§•ë²Œ': ['184575', '24275', '343527', '403876', '343721', '231895', '337247']
  },
  'ì‚¬ëƒ¥ê¾¼': {
    'ì•¼ìˆ˜': ['19574', '193530', '217200', '120679', '201430', '459922', '378747'],
    'ì‚¬ê²©': ['257044', '260402', '257620', '288613', '389880', '407401', '385638'],
    'ìƒì¡´': ['259387', '266779', '190925', '270335', '375891', '236776', '390163']
  },
  'ë„ì ': {
    'ì•”ì‚´': ['360194', '385408', '426591', '381802', '385949', '319032', '385616'],
    'ë¬´ë²•': ['195627', '185311', '381623', '384631', '385427', '432255', '432236'],
    'ì í–‰': ['121471', '185313', '212283', '196819', '382245', '280719', '277925']
  },
  'ì‚¬ì œ': {
    'ìˆ˜ì–‘': ['246287', '204197', '109964', '214621', '373481', '421453', '314867'],
    'ì‹ ì„±': ['64843', '64901', '200209', '391677', '372835', '265202', '328530'],
    'ì•”í‘': ['205385', '228260', '391109', '263165', '391154', '455767', '407466']
  },
  'ì£¼ìˆ ì‚¬': {
    'ì •ê¸°': ['191634', '192249', '192222', '157153', '114050', '454391', '378081'],
    'ê³ ì–‘': ['333974', '320125', '188443', '384352', '382042', '454009', '197214'],
    'ë³µì›': ['79206', '73685', '108280', '207778', '98008', '375982', '383009']
  },
  'ë§ˆë²•ì‚¬': {
    'ë¹„ì „': ['365350', '376103', '205025', '389713', '449700', '382440', '383512'],
    'í™”ì—¼': ['153561', '153595', '157980', '190319', '383637', '453283', '452909'],
    'ëƒ‰ê¸°': ['190356', '84714', '257537', '270232', '378433', '452757', '444728']
  },
  'í‘ë§ˆë²•ì‚¬': {
    'ê³ í†µ': ['264119', '454734', '386951', '442726', '387158', '454744', '278350'],
    'ì•…ë§ˆ': ['267211', '264057', '353753', '387159', '267170', '111898', '387396'],
    'íŒŒê´´': ['265412', '387158', '452928', '445522', '196447', '445736', '387159']
  },
  'ìˆ˜ë„ì‚¬': {
    'ì–‘ì¡°': ['322507', '387230', '386175', '115313', '383707', '322507', '387230'],
    'ìš´ë¬´': ['115151', '387184', '388193', '399230', '325197', '392983', '399491'],
    'í’ìš´': ['387766', '392979', '322118', '386276', '387638', '325153', '392991']
  },
  'ë“œë£¨ì´ë“œ': {
    'ì¡°í™”': ['394048', '102560', '194223', '391888', '450347', '393763', '383410'],
    'ì•¼ì„±': ['202028', '210722', '213764', '106785', '400254', '441585', '274837'],
    'ìˆ˜í˜¸': ['210705', '204066', '200851', '236748', '393622', '451161', '400233'],
    'íšŒë³µ': ['391528', '197073', '200390', '207383', '392116', '428933', '428858']
  },
  'ì•…ë§ˆì‚¬ëƒ¥ê¾¼': {
    'íŒŒë©¸': ['258920', '258860', '390163', '452416', '452437', '342817', '427912'],
    'ë³µìˆ˜': ['389807', '389815', '452486', '389697', '391393', '389860', '388109']
  },
  'ì£½ìŒì˜ê¸°ì‚¬': {
    'í˜ˆê¸°': ['383269', '376079', '454886', '377588', '383313', '219809', '364319'],
    'ëƒ‰ê¸°': ['49206', '377590', '439843', '458444', '196770', '279302', '376096'],
    'ë¶€ì •': ['207311', '343294', '390268', '115989', '455395', '276837', '390279']
  },
  'ê¸°ì›ì‚¬': {
    'í™©í': ['403208', '441461', '442257', '403631', '444016', '443300', '403265'],
    'ë³´ì¡´': ['406732', '433874', '442204', '378464', '430539', '371424', '360827'],
    'ì¦ê°•': ['403264', '378441', '381748', '443328', '408092', '409311', '403631']
  }
};

// ë°ì´í„°ë² ì´ìŠ¤ ì—…ë°ì´íŠ¸
let updateCount = {
  baseline: 0,
  talents: 0,
  specAssigned: 0
};

Object.entries(database).forEach(([className, classSkills]) => {
  // ê¸°ë³¸ ìŠ¤í‚¬ íŒë³„
  const baselineIds = baselineSkills[className] || [];
  const talentIds = talentSkills[className] || [];

  Object.entries(classSkills).forEach(([skillId, skill]) => {
    // 1. ê¸°ë³¸/íŠ¹ì„± íƒ€ì… ìˆ˜ì •
    if (baselineIds.includes(skillId)) {
      if (skill.type !== 'ê¸°ë³¸') {
        skill.type = 'ê¸°ë³¸';
        updateCount.baseline++;
      }
    } else if (talentIds.includes(skillId)) {
      if (skill.type !== 'íŠ¹ì„±') {
        skill.type = 'íŠ¹ì„±';
        updateCount.talents++;
      }
    }

    // 2. ì „ë¬¸í™” í• ë‹¹ ê°œì„ 
    const koreanClassName = skill.class;
    const specMapping = specSkillMapping[koreanClassName];

    if (specMapping) {
      for (const [specName, specSkillIds] of Object.entries(specMapping)) {
        if (specSkillIds.includes(skillId)) {
          if (skill.spec !== specName) {
            skill.spec = specName;
            updateCount.specAssigned++;
          }
          break;
        }
      }
    }

    // 3. ì„¤ëª…ì´ ë¹„ì–´ìˆê±°ë‚˜ ì˜ëª»ëœ ê²½ìš° ê¸°ë³¸ê°’ ì œê³µ
    if (!skill.description || skill.description.length < 5 || skill.description.includes('ì£¼ì˜:')) {
      skill.description = `${skill.koreanName || 'ì•Œ ìˆ˜ ì—†ëŠ” ìŠ¤í‚¬'}ì˜ íš¨ê³¼ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤.`;
    }
  });
});

console.log(`âœ… ${updateCount.baseline + updateCount.talents + updateCount.specAssigned}ê°œ ìŠ¤í‚¬ ê°œì„  ì™„ë£Œ`);
console.log(`  - ê¸°ë³¸ ìŠ¤í‚¬ë¡œ ë³€ê²½: ${updateCount.baseline}ê°œ`);
console.log(`  - íŠ¹ì„±ìœ¼ë¡œ ë³€ê²½: ${updateCount.talents}ê°œ`);
console.log(`  - ì „ë¬¸í™” í• ë‹¹: ${updateCount.specAssigned}ê°œ`);

// ê°œì„ ëœ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
const outputPath = path.join(__dirname, 'tww-s3-manual-enhanced-database.json');
fs.writeFileSync(outputPath, JSON.stringify(database, null, 2), 'utf8');
console.log(`\nğŸ’¾ ì €ì¥ ì™„ë£Œ: ${outputPath}`);

// React ëª¨ë“ˆ ìƒì„±
const allSkills = [];
const stats = {
  total: 0,
  baseline: 0,
  talents: 0,
  withSpec: 0,
  classes: {}
};

Object.entries(database).forEach(([className, classSkills]) => {
  const classNameKr = classSkills[Object.keys(classSkills)[0]]?.class || className;
  stats.classes[classNameKr] = {
    total: 0,
    baseline: 0,
    talents: 0
  };

  Object.values(classSkills).forEach(skill => {
    allSkills.push(skill);
    stats.total++;
    stats.classes[classNameKr].total++;

    if (skill.type === 'ê¸°ë³¸') {
      stats.baseline++;
      stats.classes[classNameKr].baseline++;
    }
    if (skill.type === 'íŠ¹ì„±') {
      stats.talents++;
      stats.classes[classNameKr].talents++;
    }
    if (skill.spec && skill.spec !== 'ê³µìš©') {
      stats.withSpec++;
    }
  });
});

const moduleContent = `// TWW Season 3 ìˆ˜ë™ ë¶„ë¥˜ ê°•í™” ë°ì´í„°ë² ì´ìŠ¤
// ìƒì„±: ${new Date().toISOString()}
// ì´ ${stats.total}ê°œ ìŠ¤í‚¬ (ê¸°ë³¸: ${stats.baseline}, íŠ¹ì„±: ${stats.talents}, ì „ë¬¸í™” í• ë‹¹: ${stats.withSpec})

export const twwS3SkillDatabase = ${JSON.stringify(allSkills, null, 2)};

export const classData = {
  'ì „ì‚¬': { name: 'ì „ì‚¬', color: '#C79C6E', specs: ['ë¬´ê¸°', 'ë¶„ë…¸', 'ë°©ì–´'] },
  'ì„±ê¸°ì‚¬': { name: 'ì„±ê¸°ì‚¬', color: '#F58CBA', specs: ['ì‹ ì„±', 'ë³´í˜¸', 'ì§•ë²Œ'] },
  'ì‚¬ëƒ¥ê¾¼': { name: 'ì‚¬ëƒ¥ê¾¼', color: '#ABD473', specs: ['ì•¼ìˆ˜', 'ì‚¬ê²©', 'ìƒì¡´'] },
  'ë„ì ': { name: 'ë„ì ', color: '#FFF569', specs: ['ì•”ì‚´', 'ë¬´ë²•', 'ì í–‰'] },
  'ì‚¬ì œ': { name: 'ì‚¬ì œ', color: '#FFFFFF', specs: ['ìˆ˜ì–‘', 'ì‹ ì„±', 'ì•”í‘'] },
  'ì£¼ìˆ ì‚¬': { name: 'ì£¼ìˆ ì‚¬', color: '#0070DE', specs: ['ì •ê¸°', 'ê³ ì–‘', 'ë³µì›'] },
  'ë§ˆë²•ì‚¬': { name: 'ë§ˆë²•ì‚¬', color: '#69CCF0', specs: ['ë¹„ì „', 'í™”ì—¼', 'ëƒ‰ê¸°'] },
  'í‘ë§ˆë²•ì‚¬': { name: 'í‘ë§ˆë²•ì‚¬', color: '#9482C9', specs: ['ê³ í†µ', 'ì•…ë§ˆ', 'íŒŒê´´'] },
  'ìˆ˜ë„ì‚¬': { name: 'ìˆ˜ë„ì‚¬', color: '#00FF96', specs: ['ì–‘ì¡°', 'ìš´ë¬´', 'í’ìš´'] },
  'ë“œë£¨ì´ë“œ': { name: 'ë“œë£¨ì´ë“œ', color: '#FF7D0A', specs: ['ì¡°í™”', 'ì•¼ì„±', 'ìˆ˜í˜¸', 'íšŒë³µ'] },
  'ì•…ë§ˆì‚¬ëƒ¥ê¾¼': { name: 'ì•…ë§ˆì‚¬ëƒ¥ê¾¼', color: '#A330C9', specs: ['íŒŒë©¸', 'ë³µìˆ˜'] },
  'ì£½ìŒì˜ê¸°ì‚¬': { name: 'ì£½ìŒì˜ê¸°ì‚¬', color: '#C41E3A', specs: ['í˜ˆê¸°', 'ëƒ‰ê¸°', 'ë¶€ì •'] },
  'ê¸°ì›ì‚¬': { name: 'ê¸°ì›ì‚¬', color: '#33937F', specs: ['í™©í', 'ë³´ì¡´', 'ì¦ê°•'] }
};

export const databaseStats = {
  totalSkills: ${stats.total},
  basicSkills: ${stats.baseline},
  talentSkills: ${stats.talents},
  skillsWithSpec: ${stats.withSpec},
  classes: ${JSON.stringify(stats.classes, null, 2)},
  lastUpdated: '${new Date().toISOString()}'
};

export default twwS3SkillDatabase;
`;

const reactModulePath = path.join(__dirname, '..', 'src', 'data', 'twwS3ManualEnhancedDatabase.js');
fs.writeFileSync(reactModulePath, moduleContent, 'utf8');
console.log(`ğŸ“¦ React ëª¨ë“ˆ ì €ì¥: ${reactModulePath}`);

console.log('\nâœ¨ ìˆ˜ë™ ë¶„ë¥˜ ì ìš© ì™„ë£Œ!');